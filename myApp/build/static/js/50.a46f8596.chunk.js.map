{"version":3,"sources":["../node_modules/@ionic/core/dist/esm-es5/ion-virtual-scroll.entry.js"],"names":["__webpack_require__","r","__webpack_exports__","d","VirtualScroll","tslib__WEBPACK_IMPORTED_MODULE_0__","_index_e806d1f6_js__WEBPACK_IMPORTED_MODULE_1__","createNode","t","e","i","getTemplate","ownerDocument","importNode","content","children","querySelector","calcCells","n","s","a","o","l","h","c","u","f","p","g","v","push","type","value","index","height","reads","visible","this","Object","range","offset","length","viewportHeight","cells","virtualDom","isEnabled","viewportOffset","currentScrollTop","indexDirty","lastItemLen","totalHeight","approxItemHeight","approxHeaderHeight","approxFooterHeight","onScroll","updateVirtualScroll","prototype","itemsChanged","connectedCallback","label","el","closest","getScrollElement","console","error","scrollEl","sent","contentEl","updateState","componentDidUpdate","disconnectedCallback","undefined","onResize","positionForItem","Promise","resolve","find","positionForIndex","getHeightIndex","checkRange","items","findIndex","findCellIndex","itemHeight","headerHeight","footerHeight","headerFn","footerFn","inplaceUpdate","Math","max","scheduleUpdate","checkEnd","timerUpdate","clearTimeout","readVS","bind","writeVS","offsetTop","offsetParent","offsetHeight","scrollTop","top","bottom","getViewport","min","getRange","getShouldUpdate","change","cell","filter","forEach","updateVDom","nodeRender","Array","from","tagName","classList","add","appendChild","style","transform","remove","doRender","updateCellHeight","domRender","renderItem","window","getComputedStyle","parseFloat","getPropertyValue","setCellHeight","componentOnReady","then","setTimeout","enableScrollEvents","Infinity","calcHeightIndex","heightIndex","Uint32Array","set","subarray","resizeBuffer","rmEvent","addEventListener","removeEventListener","renderVirtualNode","renderHeader","renderFooter","render","VirtualProxy","dom","map","defineProperty","get","enumerable","configurable","vattrs","class","assign"],"mappings":"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","file":"static/js/50.a46f8596.chunk.js","sourcesContent":["import { __awaiter, __generator } from \"tslib\";\nimport { r as registerInstance, f as readTask, c as writeTask, j as forceUpdate, h, H as Host, i as getElement } from \"./index-e806d1f6.js\";\nvar CELL_TYPE_ITEM = \"item\";\nvar CELL_TYPE_HEADER = \"header\";\nvar CELL_TYPE_FOOTER = \"footer\";\nvar NODE_CHANGE_NONE = 0;\nvar NODE_CHANGE_POSITION = 1;\nvar NODE_CHANGE_CELL = 2;\nvar MIN_READS = 2;\n\nvar updateVDom = function updateVDom(t, e, i, r) {\n  for (var n = 0, s = t; n < s.length; n++) {\n    var a = s[n];\n    a.change = NODE_CHANGE_NONE;\n    a.d = true;\n  }\n\n  var o = [];\n  var l = r.offset + r.length;\n\n  var h = function h(r) {\n    var n = i[r];\n    var s = t.find(function (t) {\n      return t.d && t.cell === n;\n    });\n\n    if (s) {\n      var a = e[r];\n\n      if (a !== s.top) {\n        s.top = a;\n        s.change = NODE_CHANGE_POSITION;\n      }\n\n      s.d = false;\n    } else {\n      o.push(n);\n    }\n  };\n\n  for (var c = r.offset; c < l; c++) {\n    h(c);\n  }\n\n  var u = t.filter(function (t) {\n    return t.d;\n  });\n\n  var f = function f(i) {\n    var r = u.find(function (t) {\n      return t.d && t.cell.type === i.type;\n    });\n    var n = i.i;\n\n    if (r) {\n      r.d = false;\n      r.change = NODE_CHANGE_CELL;\n      r.cell = i;\n      r.top = e[n];\n    } else {\n      t.push({\n        d: false,\n        cell: i,\n        visible: true,\n        change: NODE_CHANGE_CELL,\n        top: e[n]\n      });\n    }\n  };\n\n  for (var d = 0, p = o; d < p.length; d++) {\n    var v = p[d];\n    f(v);\n  }\n\n  t.filter(function (t) {\n    return t.d && t.top !== -9999;\n  }).forEach(function (t) {\n    t.change = NODE_CHANGE_POSITION;\n    t.top = -9999;\n  });\n};\n\nvar doRender = function doRender(t, e, i, r) {\n  var n = Array.from(t.children).filter(function (t) {\n    return t.tagName !== \"TEMPLATE\";\n  });\n  var s = n.length;\n  var a;\n\n  for (var o = 0; o < i.length; o++) {\n    var l = i[o];\n    var h = l.cell;\n\n    if (l.change === NODE_CHANGE_CELL) {\n      if (o < s) {\n        a = n[o];\n        e(a, h, o);\n      } else {\n        var c = createNode(t, h.type);\n        a = e(c, h, o) || c;\n        a.classList.add(\"virtual-item\");\n        t.appendChild(a);\n      }\n\n      a[\"$ionCell\"] = h;\n    } else {\n      a = n[o];\n    }\n\n    if (l.change !== NODE_CHANGE_NONE) {\n      a.style.transform = \"translate3d(0,\" + l.top + \"px,0)\";\n    }\n\n    var u = h.visible;\n\n    if (l.visible !== u) {\n      if (u) {\n        a.classList.remove(\"virtual-loading\");\n      } else {\n        a.classList.add(\"virtual-loading\");\n      }\n\n      l.visible = u;\n    }\n\n    if (h.reads > 0) {\n      r(h, a);\n      h.reads--;\n    }\n  }\n};\n\nvar createNode = function createNode(t, e) {\n  var i = getTemplate(t, e);\n\n  if (i && t.ownerDocument) {\n    return t.ownerDocument.importNode(i.content, true).children[0];\n  }\n\n  return null;\n};\n\nvar getTemplate = function getTemplate(t, e) {\n  switch (e) {\n    case CELL_TYPE_ITEM:\n      return t.querySelector(\"template:not([name])\");\n\n    case CELL_TYPE_HEADER:\n      return t.querySelector(\"template[name=header]\");\n\n    case CELL_TYPE_FOOTER:\n      return t.querySelector(\"template[name=footer]\");\n  }\n};\n\nvar getViewport = function getViewport(t, e, i) {\n  return {\n    top: Math.max(t - i, 0),\n    bottom: t + e + i\n  };\n};\n\nvar getRange = function getRange(t, e, i) {\n  var r = e.top;\n  var n = e.bottom;\n  var s = 0;\n\n  for (; s < t.length; s++) {\n    if (t[s] > r) {\n      break;\n    }\n  }\n\n  var a = Math.max(s - i - 1, 0);\n\n  for (; s < t.length; s++) {\n    if (t[s] >= n) {\n      break;\n    }\n  }\n\n  var o = Math.min(s + i, t.length);\n  var l = o - a;\n  return {\n    offset: a,\n    length: l\n  };\n};\n\nvar getShouldUpdate = function getShouldUpdate(t, e, i) {\n  var r = i.offset + i.length;\n  return t <= r || e.offset !== i.offset || e.length !== i.length;\n};\n\nvar findCellIndex = function findCellIndex(t, e) {\n  var i = t.length > 0 ? t[t.length - 1].index : 0;\n\n  if (e === 0) {\n    return 0;\n  } else if (e === i + 1) {\n    return t.length;\n  } else {\n    return t.findIndex(function (t) {\n      return t.index === e;\n    });\n  }\n};\n\nvar inplaceUpdate = function inplaceUpdate(t, e, i) {\n  if (i === 0 && e.length >= t.length) {\n    return e;\n  }\n\n  for (var r = 0; r < e.length; r++) {\n    t[r + i] = e[r];\n  }\n\n  return t;\n};\n\nvar calcCells = function calcCells(t, e, i, r, n, s, a, o, l, h, c, u) {\n  var f = [];\n  var d = u + c;\n\n  for (var p = c; p < d; p++) {\n    var v = t[p];\n\n    if (n) {\n      var g = n(v, p, t);\n\n      if (g != null) {\n        f.push({\n          i: h++,\n          type: CELL_TYPE_HEADER,\n          value: g,\n          index: p,\n          height: i ? i(g, p) : a,\n          reads: i ? 0 : MIN_READS,\n          visible: !!i\n        });\n      }\n    }\n\n    f.push({\n      i: h++,\n      type: CELL_TYPE_ITEM,\n      value: v,\n      index: p,\n      height: e ? e(v, p) : l,\n      reads: e ? 0 : MIN_READS,\n      visible: !!e\n    });\n\n    if (s) {\n      var g = s(v, p, t);\n\n      if (g != null) {\n        f.push({\n          i: h++,\n          type: CELL_TYPE_FOOTER,\n          value: g,\n          index: p,\n          height: r ? r(g, p) : o,\n          reads: r ? 0 : MIN_READS,\n          visible: !!r\n        });\n      }\n    }\n  }\n\n  return f;\n};\n\nvar calcHeightIndex = function calcHeightIndex(t, e, i) {\n  var r = t[i];\n\n  for (var n = i; n < t.length; n++) {\n    t[n] = r;\n    r += e[n].height;\n  }\n\n  return r;\n};\n\nvar resizeBuffer = function resizeBuffer(t, e) {\n  if (!t) {\n    return new Uint32Array(e);\n  }\n\n  if (t.length === e) {\n    return t;\n  } else if (e > t.length) {\n    var i = new Uint32Array(e);\n    i.set(t);\n    return i;\n  } else {\n    return t.subarray(0, e);\n  }\n};\n\nvar positionForIndex = function positionForIndex(t, e, i) {\n  var r = e.find(function (e) {\n    return e.type === CELL_TYPE_ITEM && e.index === t;\n  });\n\n  if (r) {\n    return i[r.i];\n  }\n\n  return -1;\n};\n\nvar virtualScrollCss = \"ion-virtual-scroll{display:block;position:relative;width:100%;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}ion-virtual-scroll>.virtual-loading{opacity:0}ion-virtual-scroll>.virtual-item{position:absolute !important;top:0 !important;right:0 !important;left:0 !important;-webkit-transition-duration:0ms;transition-duration:0ms;will-change:transform}\";\n\nvar VirtualScroll = function () {\n  function t(t) {\n    var e = this;\n    registerInstance(this, t);\n    this.range = {\n      offset: 0,\n      length: 0\n    };\n    this.viewportHeight = 0;\n    this.cells = [];\n    this.virtualDom = [];\n    this.isEnabled = false;\n    this.viewportOffset = 0;\n    this.currentScrollTop = 0;\n    this.indexDirty = 0;\n    this.lastItemLen = 0;\n    this.totalHeight = 0;\n    this.approxItemHeight = 45;\n    this.approxHeaderHeight = 30;\n    this.approxFooterHeight = 30;\n\n    this.onScroll = function () {\n      e.updateVirtualScroll();\n    };\n  }\n\n  t.prototype.itemsChanged = function () {\n    this.calcCells();\n    this.updateVirtualScroll();\n  };\n\n  t.prototype.connectedCallback = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var t, e;\n      return __generator(this, function (i) {\n        switch (i.label) {\n          case 0:\n            t = this.el.closest(\"ion-content\");\n\n            if (!t) {\n              console.error(\"<ion-virtual-scroll> must be used inside an <ion-content>\");\n              return [2];\n            }\n\n            e = this;\n            return [4, t.getScrollElement()];\n\n          case 1:\n            e.scrollEl = i.sent();\n            this.contentEl = t;\n            this.calcCells();\n            this.updateState();\n            return [2];\n        }\n      });\n    });\n  };\n\n  t.prototype.componentDidUpdate = function () {\n    this.updateState();\n  };\n\n  t.prototype.disconnectedCallback = function () {\n    this.scrollEl = undefined;\n  };\n\n  t.prototype.onResize = function () {\n    this.calcCells();\n    this.updateVirtualScroll();\n  };\n\n  t.prototype.positionForItem = function (t) {\n    return Promise.resolve(positionForIndex(t, this.cells, this.getHeightIndex()));\n  };\n\n  t.prototype.checkRange = function (t, e) {\n    if (e === void 0) {\n      e = -1;\n    }\n\n    return __awaiter(this, void 0, void 0, function () {\n      var i, r, n;\n      return __generator(this, function (s) {\n        if (!this.items) {\n          return [2];\n        }\n\n        i = e === -1 ? this.items.length - t : e;\n        r = findCellIndex(this.cells, t);\n        n = calcCells(this.items, this.itemHeight, this.headerHeight, this.footerHeight, this.headerFn, this.footerFn, this.approxHeaderHeight, this.approxFooterHeight, this.approxItemHeight, r, t, i);\n        this.cells = inplaceUpdate(this.cells, n, r);\n        this.lastItemLen = this.items.length;\n        this.indexDirty = Math.max(t - 1, 0);\n        this.scheduleUpdate();\n        return [2];\n      });\n    });\n  };\n\n  t.prototype.checkEnd = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (t) {\n        if (this.items) {\n          this.checkRange(this.lastItemLen);\n        }\n\n        return [2];\n      });\n    });\n  };\n\n  t.prototype.updateVirtualScroll = function () {\n    if (!this.isEnabled || !this.scrollEl) {\n      return;\n    }\n\n    if (this.timerUpdate) {\n      clearTimeout(this.timerUpdate);\n      this.timerUpdate = undefined;\n    }\n\n    readTask(this.readVS.bind(this));\n    writeTask(this.writeVS.bind(this));\n  };\n\n  t.prototype.readVS = function () {\n    var t = this,\n        e = t.contentEl,\n        i = t.scrollEl,\n        r = t.el;\n    var n = 0;\n    var s = r;\n\n    while (s && s !== e) {\n      n += s.offsetTop;\n      s = s.offsetParent;\n    }\n\n    this.viewportOffset = n;\n\n    if (i) {\n      this.viewportHeight = i.offsetHeight;\n      this.currentScrollTop = i.scrollTop;\n    }\n  };\n\n  t.prototype.writeVS = function () {\n    var t = this.indexDirty;\n    var e = this.currentScrollTop - this.viewportOffset;\n    var i = getViewport(e, this.viewportHeight, 100);\n    var r = this.getHeightIndex();\n    var n = getRange(r, i, 2);\n    var s = getShouldUpdate(t, this.range, n);\n\n    if (!s) {\n      return;\n    }\n\n    this.range = n;\n    updateVDom(this.virtualDom, r, this.cells, n);\n\n    if (this.nodeRender) {\n      doRender(this.el, this.nodeRender, this.virtualDom, this.updateCellHeight.bind(this));\n    } else if (this.domRender) {\n      this.domRender(this.virtualDom);\n    } else if (this.renderItem) {\n      forceUpdate(this);\n    }\n  };\n\n  t.prototype.updateCellHeight = function (t, e) {\n    var i = this;\n\n    var r = function r() {\n      if (e[\"$ionCell\"] === t) {\n        var r = window.getComputedStyle(e);\n        var n = e.offsetHeight + parseFloat(r.getPropertyValue(\"margin-bottom\"));\n        i.setCellHeight(t, n);\n      }\n    };\n\n    if (e && e.componentOnReady) {\n      e.componentOnReady().then(r);\n    } else {\n      r();\n    }\n  };\n\n  t.prototype.setCellHeight = function (t, e) {\n    var i = t.i;\n\n    if (t !== this.cells[i]) {\n      return;\n    }\n\n    if (t.height !== e || t.visible !== true) {\n      t.visible = true;\n      t.height = e;\n      this.indexDirty = Math.min(this.indexDirty, i);\n      this.scheduleUpdate();\n    }\n  };\n\n  t.prototype.scheduleUpdate = function () {\n    var t = this;\n    clearTimeout(this.timerUpdate);\n    this.timerUpdate = setTimeout(function () {\n      return t.updateVirtualScroll();\n    }, 100);\n  };\n\n  t.prototype.updateState = function () {\n    var t = !!(this.scrollEl && this.cells);\n\n    if (t !== this.isEnabled) {\n      this.enableScrollEvents(t);\n\n      if (t) {\n        this.updateVirtualScroll();\n      }\n    }\n  };\n\n  t.prototype.calcCells = function () {\n    if (!this.items) {\n      return;\n    }\n\n    this.lastItemLen = this.items.length;\n    this.cells = calcCells(this.items, this.itemHeight, this.headerHeight, this.footerHeight, this.headerFn, this.footerFn, this.approxHeaderHeight, this.approxFooterHeight, this.approxItemHeight, 0, 0, this.lastItemLen);\n    this.indexDirty = 0;\n  };\n\n  t.prototype.getHeightIndex = function () {\n    if (this.indexDirty !== Infinity) {\n      this.calcHeightIndex(this.indexDirty);\n    }\n\n    return this.heightIndex;\n  };\n\n  t.prototype.calcHeightIndex = function (t) {\n    if (t === void 0) {\n      t = 0;\n    }\n\n    this.heightIndex = resizeBuffer(this.heightIndex, this.cells.length);\n    this.totalHeight = calcHeightIndex(this.heightIndex, this.cells, t);\n    this.indexDirty = Infinity;\n  };\n\n  t.prototype.enableScrollEvents = function (t) {\n    var e = this;\n\n    if (this.rmEvent) {\n      this.rmEvent();\n      this.rmEvent = undefined;\n    }\n\n    var i = this.scrollEl;\n\n    if (i) {\n      this.isEnabled = t;\n      i.addEventListener(\"scroll\", this.onScroll);\n\n      this.rmEvent = function () {\n        i.removeEventListener(\"scroll\", e.onScroll);\n      };\n    }\n  };\n\n  t.prototype.renderVirtualNode = function (t) {\n    var e = t.cell,\n        i = e.type,\n        r = e.value,\n        n = e.index;\n\n    switch (i) {\n      case CELL_TYPE_ITEM:\n        return this.renderItem(r, n);\n\n      case CELL_TYPE_HEADER:\n        return this.renderHeader(r, n);\n\n      case CELL_TYPE_FOOTER:\n        return this.renderFooter(r, n);\n    }\n  };\n\n  t.prototype.render = function () {\n    var t = this;\n    return h(Host, {\n      style: {\n        height: this.totalHeight + \"px\"\n      }\n    }, this.renderItem && h(VirtualProxy, {\n      dom: this.virtualDom\n    }, this.virtualDom.map(function (e) {\n      return t.renderVirtualNode(e);\n    })));\n  };\n\n  Object.defineProperty(t.prototype, \"el\", {\n    get: function get() {\n      return getElement(this);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(t, \"watchers\", {\n    get: function get() {\n      return {\n        itemHeight: [\"itemsChanged\"],\n        headerHeight: [\"itemsChanged\"],\n        footerHeight: [\"itemsChanged\"],\n        items: [\"itemsChanged\"]\n      };\n    },\n    enumerable: false,\n    configurable: true\n  });\n  return t;\n}();\n\nvar VirtualProxy = function VirtualProxy(t, e, i) {\n  var r = t.dom;\n  return i.map(e, function (t, e) {\n    var i = r[e];\n    var n = t.vattrs || {};\n    var s = n.class || \"\";\n    s += \"virtual-item \";\n\n    if (!i.visible) {\n      s += \"virtual-loading\";\n    }\n\n    return Object.assign(Object.assign({}, t), {\n      vattrs: Object.assign(Object.assign({}, n), {\n        class: s,\n        style: Object.assign(Object.assign({}, n.style), {\n          transform: \"translate3d(0,\" + i.top + \"px,0)\"\n        })\n      })\n    });\n  });\n};\n\nVirtualScroll.style = virtualScrollCss;\nexport { VirtualScroll as ion_virtual_scroll };"],"sourceRoot":""}